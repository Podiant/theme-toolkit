<!-- The episode template, shown when a user visits a specific episode -->

<!-- Add a top section with the title and publication date of the episode -->
<section class="site-blocks-cover overlay inner-page-cover"{{# if podcast_banner_image }} style="background-image: url('{{ podcast_banner_image }}');"{{/ if }} data-stellar-background-ratio="0.5">
  <div class="container">
    <div class="row align-items-center justify-content-center text-center">
      <div class="col-md-8" data-aos="fade-up" data-aos-delay="400">
        <h2 class="text-white font-weight-light mb-2 display-4">{{ object.title }}</h2>
        {{# exists object.published }}
          <div class="text-white mb-3"><span class="text-white-opacity-05">
            <small>{{ date object.published theme_options.date_format }}</small>
          </div>
        {{/ exists }}
      </div>
    </div>
  </div>
</section>

{{# with object }}
  <main id="main" class="container site-section">
    <div class="player mb-5">
      <!-- Show the player -->
      {{{ mini_player }}}
    </div>

    <div class="row justify-content-center">
      <div class="col-md-7">
        <!-- Use three braces to ensure content that contains HTML displays correctly -->
        {{{ description }}}

        {{# exists links }}
          <!-- List the episode links with the header "Links" -->
          <h2 class="mt-3">{{ ../strings.links }}</h2>

          <ul class="list-unstyled">
            {{# each links }}
              <li>
                <a href="{{ link_url }}" target="_blank">{{ link_title }}</a>
              </li>
            {{/ each }}
          </ul>
        {{/ exists }}

        {{# exists transcript }}
          <!-- Add the episode transcript with the header "Transcript" -->
          <h3 class="mt-3">{{ ../strings.transcript }}</h3>
          {{{ transcript }}}
        {{/ exists }}
      </div>
    </div>
  </main>

  {{# exists guests }}
    <!-- Add a list of episode guests -->
    <section class="site-section">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md-12 text-center">
            <!-- Write the word "Guest" or "Guests", depending on the number of guests in the episode -->
            <h2 class="font-weight-bold text-black">{{ ../strings.guests }}</h2>
          </div>
        </div>
        <div class="row">
          <!--
          Create a number of half-size empty grid columns so that the number of
          guests is always centred, even if there are fewer than 3 or the number
          of guests is not a multiple of 3.
          -->

          {{# grid_offset guests.length 3 }}
            <div class="col-md-3 col-lg-2 mb-5 mb-lg-5">&nbsp;</div>
          {{/ grid_offset }}

          {{# each guests }}
            <!-- Loop through the list of guests -->
            <div class="col-md-6 col-lg-4 mb-5 mb-lg-5">
              <div class="team-member">
                <!-- Add the guest's photo -->
                <img src="{{ guest_image }}" alt="Image" class="img-fluid" style="width: 100%;">

                <div class="text">
                  <!-- Add the guest's name -->
                  <h2 class="mb-2 font-weight-light h4">{{ guest_name }}</h2>

                  <p>
                    {{# each links }}
                      <!-- Loop through the guest's links -->
                      <a href="{{ link_url }}" class="text-white p-2" target="_blank" rel="noreferrer">
                        {{{ link_icon }}}
                      </a>
                    {{/ each }}
                  </p>
                </div>
              </div>
            </div>
          {{/ each }}
        </div>
      </div>
    </section>
  {{/ exists }}

  {{# exists similar_episodes }}
    <!-- Show this if there are similar episodes the listener might enjoy -->
    <section class="site-section bg-light">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md-12 text-center">
            <h2 class="font-weight-bold text-black">{{ ../theme_options.string_related_episodes }}</h2>
          </div>
        </div>
        <div class="row">
          {{# each similar_episodes }}
            <div class="col-md-6">
              <div class="d-block podcast-entry bg-white mb-5" data-aos="fade-up">
                <!-- Show the episode artwork -->
                <div class="image w-100" style="height: 300px; background-image: url('{{ episode_image }}');"></div>
                <div class="text w-100">
                  <!-- Add a link to the episode with the title, that opens up in a new tab -->
                  <h3 class="font-weight-light">
                    <a href="{{ episode_url }}" target="_blank">{{ episode_title }}</a>
                  </h3>
                  <div class="mb-3">
                    <!-- Show the podcast name -->
                    <span class="text-black-opacity-05">
                      <small>from {{ podcast_name }}</small>
                    </span>
                  </div>

                  <!-- Show the episode summary -->
                  <p class="mb-4">{{ episode_summary }}</p>
                </div>
              </div>
            </div>
          {{/ each }}
        </div>
      </div>
    </section>
  {{/ exists }}
{{/ with }}
